.header{
  background: linear-gradient(180deg, #8A2EFF 0%, #6A1B9A 100%);
  color:#fff;
}

/* Brand over nav; center stack */
.headerInner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
  padding:24px 0 36px; /* adds breathing room BELOW the buttons */
  text-align:center;
  position:relative;
}
.brand{
  margin:0;
  font-weight:900;
  letter-spacing:.5px;
  font-size:2.2rem;
}

/* Hamburger hidden on desktop */
.hamburger{ display:none; width:40px;height:40px; border:none;background:transparent;padding:0; }
.hamburger span{ display:block; width:22px;height:2px;margin:5px auto; background:#fff;border-radius:2px; }

/* Nav row */
.nav{
  display:flex;
  gap:16px;
  justify-content:center;
  flex-wrap:wrap;
  margin:0;
  padding:0;
}

/* Bubble button as a <button> */
.tab{
  display:block;
  min-width:130px;
  text-align:center;
  border-radius:999px;
  padding:12px 20px;
  font-family:'Press Start 2P', cursive;
  font-size:12px;
  color:#fff;
  position:relative;
  overflow:hidden;
  background: linear-gradient(135deg,#FF2E9F 0%, #8A2EFF 55%, #00C2FF 100%);
  box-shadow:
    inset 0 2px 6px rgba(255,255,255,.65),
    inset 0 -3px 8px rgba(0,0,0,.25),
    0 6px 16px rgba(0,0,0,.20);
  transition: transform .12s ease, box-shadow .15s ease, filter .2s ease;
  border:0;
  cursor:pointer;
}
.tab::before{
  content:"";
  position:absolute; left:6%; right:6%; top:6%;
  height:40%;
  border-radius:999px;
  background:linear-gradient(to bottom, rgba(255,255,255,.7), rgba(255,255,255,0));
}

/* Pink star sparkle overlay — smooth fade in/out */
.tab::after{
  content:"";
  position:absolute; inset:0;
  opacity:0;                       /* hidden by default */
  transition: opacity .35s ease-in-out;
  pointer-events:none;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22'%3E%3Cpolygon points='11,0 13,8 22,11 13,14 11,22 9,14 0,11 9,8' fill='%23ff7ad9'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18'%3E%3Cpolygon points='9,0 11,6 18,9 11,12 9,18 7,12 0,9 7,6' fill='%23ffb3e6'/%3E%3C/svg%3E");
  background-repeat: repeat, repeat;
  background-size: 70px 70px, 90px 90px;
  animation: starDrift 12s linear infinite;
  mix-blend-mode: screen;
}
.tab.active::after{ opacity:1; }   /* fade in when active */
@keyframes starDrift{
  0%   { background-position: 0 0, 0 0; }
  100% { background-position: 180px 120px, -140px 160px; }
}

.tab:hover{
  transform:translateY(-1px);
  box-shadow:
    inset 0 3px 8px rgba(255,255,255,.75),
    inset 0 -4px 10px rgba(0,0,0,.3),
    0 10px 22px rgba(0,0,0,.25);
}
.tab:active{ transform:translateY(0); filter:saturate(1.05); }
.tab:focus-visible{ outline:2px solid #fff; outline-offset:2px; }

/* Mobile: burger left, brand centered, nav below */
@media (max-width:700px){
  .headerInner{
    display:grid;
    grid-template-columns: 40px 1fr 40px;
    grid-template-areas:
      "burger brand ."
      "nav    nav   nav";
    row-gap:12px;
    padding:14px 8px 18px; /* still keeps bottom spacing under bubbles */
  }
  .hamburger{ display:block; grid-area:burger; align-self:center; justify-self:start; }
  .brand{ grid-area:brand; font-size:1.9rem; align-self:center; justify-self:center; }
  .nav{
    grid-area:nav;
    display:none;
    flex-direction:column;
    gap:12px;
    width:100%;
  }
  .nav.open{ display:flex; }
  .tab{ width:100%; }
}

/* ==== OVERRIDE: Pink 5-point star sparkle (tiny, smooth, non-snappy) ==== */
/* This replaces the previous .tab::after sparkle. Because it's appended,
   it will override earlier rules with the same selectors. */
.tab::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:0;                           /* hidden by default */
  transition:opacity .35s ease-in-out; /* smooth fade in/out when (de)activating */

  /* Two layers of tiny 5-point stars (SVG data URIs) */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 20 20'%3E%3Cpath d='M10 1 L12.6 7.0 L19 7.3 L14.1 11.2 L15.6 17.6 L10 14.1 L4.4 17.6 L5.9 11.2 L1 7.3 L7.4 7.0 Z' fill='%23ff77d6'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20'%3E%3Cpath d='M10 1 L12.6 7.0 L19 7.3 L14.1 11.2 L15.6 17.6 L10 14.1 L4.4 17.6 L5.9 11.2 L1 7.3 L7.4 7.0 Z' fill='%23ffc3ea'/%3E%3C/svg%3E");
  background-repeat: repeat, repeat;
  background-size: 12px 12px, 10px 10px;       /* very small stars */
  mix-blend-mode: screen;

  /* Drift the field + soft twinkle to hide loop seam */
  animation:
    starDrift 18s linear infinite,
    starFade  6s  ease-in-out infinite;
}

/* fade in when active; fade out when deactivated */
.tab.active::after{ opacity:1; }

/* Gentle multi-direction drift (loop friendly) */
@keyframes starDrift{
  0%   { background-position:   0px   0px,   0px   0px; }
  50%  { background-position:  90px  60px, -70px  80px; }
  100% { background-position: 180px 120px,-140px 160px; }
}

/* Soft twinkle to mask the wrap point */
@keyframes starFade{
  0%   { opacity: .0; }
  20%  { opacity: .65; }
  50%  { opacity: .9; }
  80%  { opacity: .65; }
  100% { opacity: .0; }
}

/* ===== Sparkle: subtle, few stars, animate only when active ===== */
/* Base overlay (no animation, hidden) */
.nav .tab::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:0;                                /* hidden by default */
  transition:opacity .35s ease-in-out;      /* smooth fade in/out */
  mix-blend-mode:screen;

  /* two tiny 5-point stars (SVG) — spaced out for low density */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 20 20'%3E%3Cpath d='M10 1 L12.6 7.0 L19 7.3 L14.1 11.2 L15.6 17.6 L10 14.1 L4.4 17.6 L5.9 11.2 L1 7.3 L7.4 7.0 Z' fill='%23ff77d6'/%3E%3C/svg%3E"),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20'%3E%3Cpath d='M10 1 L12.6 7.0 L19 7.3 L14.1 11.2 L15.6 17.6 L10 14.1 L4.4 17.6 L5.9 11.2 L1 7.3 L7.4 7.0 Z' fill='%23ffc3ea'/%3E%3C/svg%3E");
  background-repeat: repeat, repeat;

  /* larger tile size = fewer stars (subtle) */
  background-size: 160px 160px, 220px 220px;

  /* IMPORTANT: do NOT animate when not active */
  animation: none !important;
}

/* Active tab: show + animate gently */
.nav .tab.active::after{
  opacity:1;
  animation:
    starDrift 24s linear infinite,      /* slow drift = smooth loop */
    starFade  10s ease-in-out infinite; /* soft twinkle masks seam */
}

/* gentle multi-direction drift */
@keyframes starDrift{
  0%   { background-position:   0px   0px,   0px   0px; }
  50%  { background-position:  90px  60px, -70px  80px; }
  100% { background-position: 180px 120px,-140px 160px; }
}

/* twinkle — keeps the loop feeling organic */
@keyframes starFade{
  0%   { opacity: .15; }
  25%  { opacity: .55; }
  50%  { opacity: .80; }
  75%  { opacity: .55; }
  100% { opacity: .15; }
}

/* ==== OVERRIDE: Pink dot sparkle (subtle, active-only) ==== */
/* Base overlay (no animation, hidden) */
.nav .tab::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:0;                                /* hidden by default */
  transition:opacity .35s ease-in-out;      /* fade in/out when (de)activating */
  mix-blend-mode:screen;

  /* soft pink dots, low density via large tile size */
  background:
    radial-gradient(circle at 30% 35%, rgba(255,122,214,.7) 0 2px, rgba(255,122,214,0) 3px) repeat,
    radial-gradient(circle at 70% 65%, rgba(255,179,234,.6) 0 2px, rgba(255,179,234,0) 3px) repeat;
  background-size: 110px 110px, 140px 140px;

  /* IMPORTANT: don't animate unless active */
  animation: none !important;
}

/* Active tab: reveal + gentle drift/pulse */
.nav .tab.active::after{
  opacity:.6;                                /* faded look */
  animation:
    dotDrift 18s linear infinite,            /* slow drift to avoid seams */
    dotPulse 8s ease-in-out infinite;        /* soft overall fade to mask loop */
}

/* slow multi-direction drift so the pattern cycles smoothly */
@keyframes dotDrift{
  0%   { background-position:   0px   0px,   0px   0px; }
  50%  { background-position:  80px  60px, -60px  70px; }
  100% { background-position: 160px 120px,-120px 140px; }
}

/* subtle global fade to hide any loop snap */
@keyframes dotPulse{
  0%   { opacity:.35; }
  50%  { opacity:.7;  }
  100% { opacity:.35; }
}

/* === ensure space below the header/nav === */
.header{
  /* gap below header so content never touches bubbles */
  margin-bottom: 18px;
}

.header .headerInner{
  /* extra breathing room under the nav inside the header */
  padding-bottom: 14px !important;
}

/* fallback in case earlier rules collapse margins */
.header + .rail,
.header + .rail.mainRow{
  margin-top: 8px;
}

/* a tiny gap under the nav row itself */
.nav{ margin-bottom: 4px; }

@media (min-width: 900px){
  .header{ margin-bottom: 22px; }
  .header .headerInner{ padding-bottom: 16px !important; }
}

/* --- Bubble: allow glow to extend beyond pill --- */
.nav .tab{
  overflow: visible;                 /* glow halo can breathe */
}

/* --- Hover/focus glow: blue -> pink, TL -> BR, soft and smooth --- */
.nav .tab::before{
  content:"";
  position:absolute;
  inset:-6px;                        /* extend slightly outside the pill */
  border-radius:999px;
  background: linear-gradient(135deg, rgba(0,194,255,.55) 0%, rgba(255,122,214,.55) 100%);
  filter: blur(10px);
  opacity:0;
  transition: opacity .18s ease, filter .18s ease;
  z-index:-1;                        /* sit behind the button */
}
.nav .tab:hover::before,
.nav .tab:focus-visible::before{
  opacity:1;
  filter: blur(12px);
}

/* --- Subtle pink dot sparkle (ACTIVE TAB ONLY) --- */
/* Base overlay: hidden, no animation */
.nav .tab::after{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  opacity:0;                                /* hidden until active */
  transition: opacity .35s ease-in-out;     /* fade in/out on activate/deactivate */
  mix-blend-mode: screen;
  background:
    radial-gradient(circle at 30% 35%, rgba(255,122,214,.65) 0 2px, rgba(255,122,214,0) 3px) repeat,
    radial-gradient(circle at 70% 65%, rgba(255,179,234,.55) 0 2px, rgba(255,179,234,0) 3px) repeat;
  /* Larger tiles = fewer dots (subtle) */
  background-size: 120px 120px, 150px 150px;
  animation: none !important;
}

/* Only the active tab shows + animates the dots */
.nav .tab.active::after{
  opacity:.55;
  animation:
    dotDrift 20s linear infinite,    /* slow drift to avoid seams */
    dotPulse 9s ease-in-out infinite;/* soft fade to mask loop */
}

@keyframes dotDrift{
  0%   { background-position:   0px   0px,   0px   0px; }
  50%  { background-position:  85px  60px, -65px  80px; }
  100% { background-position: 170px 120px,-130px 160px; }
}
@keyframes dotPulse{
  0%   { opacity:.35; }
  50%  { opacity:.7;  }
  100% { opacity:.35; }
}

/* --- Force animation on the active bubble (beats earlier `animation:none !important`) --- */
.header .nav .tab.active::after{
  opacity: .55 !important;
  animation: dotDrift 20s linear infinite, dotPulse 9s ease-in-out infinite !important;
  will-change: background-position, opacity;
}

/* Safety: non-active stays still */
.header .nav .tab:not(.active)::after{
  animation: none !important;
}

/* Always animate even if Reduced Motion is on */
@media (prefers-reduced-motion: reduce){
  .header .nav .tab.active::after{
    animation: dotDrift 20s linear infinite, dotPulse 9s ease-in-out infinite !important;
  }
}

/* ===== Glitter boost (active tab) + spacing fix ===== */

/* Make dots a touch larger / denser and more opaque */
.header .nav .tab::after{
  background:
    radial-gradient(circle at 30% 35%, rgba(255,122,214,.85) 0 3px, rgba(255,122,214,0) 4px) repeat,
    radial-gradient(circle at 70% 65%, rgba(255,179,234,.75) 0 3px, rgba(255,179,234,0) 4px) repeat;
  /* smaller tiles = more dots (still subtle) */
  background-size: 95px 95px, 120px 120px;
}

/* Active tab: slightly stronger & keep smooth drift/pulse */
.header .nav .tab.active::after{
  opacity:.78 !important;
  animation: dotDrift 18s linear infinite, dotPulse 8s ease-in-out infinite !important;
  will-change: background-position, opacity;
}

/* Tighten spacing under header to prevent page scroll from padding/margins */
.header{ margin-bottom: 10px !important; }
.header .headerInner{ padding-bottom: 8px !important; }
.header + .rail,
.header + .rail.mainRow{ margin-top: 0 !important; }
.nav{ margin-bottom: 0 !important; }


/* --- prevent the nav glow from creating page scroll --- */
.header{
  /* Clip any blur/glow that might extend below the header */
  overflow: clip;                 /* modern; falls back to hidden behavior */
}

/* keep a little breathing room inside the header so the glow isn't cut off */
.header .headerInner{
  padding-bottom: 12px !important;  /* enough room for the glow, but not too much */
}

/* soften the glow slightly so it stays inside the header box comfortably */
.nav .tab::before{
  inset: -4px;                     /* was -6px */
  filter: blur(8px);               /* was 10–12px; less bleed = no scroll */
}

/* keep the glitter intensity from the last change, but make sure it shows */
.header .nav .tab::after{
  background:
    radial-gradient(circle at 30% 35%, rgba(255,122,214,.85) 0 3px, rgba(255,122,214,0) 4px) repeat,
    radial-gradient(circle at 70% 65%, rgba(255,179,234,.75) 0 3px, rgba(255,179,234,0) 4px) repeat;
  background-size: 95px 95px, 120px 120px;
}

/* force animation on active bubble only (in case an !important elsewhere disabled it) */
.header .nav .tab.active::after{
  opacity:.78 !important;
  animation: dotDrift 18s linear infinite, dotPulse 8s ease-in-out infinite !important;
  will-change: background-position, opacity;
}

/* non-active bubbles never animate */
.header .nav .tab:not(.active)::after{
  animation: none !important;
}

/* safety: if some device/browser still calculates blur as overflow height, trim it */
html, body{
  overflow-x: hidden;              /* already set earlier, keep it */
}

/* OPTIONAL: if you still see a 1px vertical scrollbar on some devices,
   uncomment the next line to hard-clip the page. Use only if needed. */
/* body{ overflow-y: auto; overflow-clip-margin: content-box; } */


/* BEGIN: NAV-GLITTER-HEARTS */
/* Make sure pill clips its effects */
.nav .tab{
  position: relative;
  border-radius: 999px;
  overflow: hidden;                 /* <- keeps glitter/glow INSIDE */
  isolation: isolate;               /* contain stacking contexts */
}

/* Outer glow (tightened so it lives inside the pill) */
.nav .tab::before{
  content:"";
  position:absolute; inset: -2px;   /* shallow so it won’t bleed */
  border-radius: inherit;
  background: radial-gradient(120px 120px at 20% 20%, rgba(0,255,255,.18), transparent 60%),
              radial-gradient(140px 140px at 80% 80%, rgba(255,0,255,.18), transparent 65%);
  filter: blur(8px);
  opacity: .9;
  z-index: 0;
  pointer-events: none;
}

/* Glitter overlay — only obvious on active */
@keyframes glitterDrift{
  0%   { background-position:   0px 0px,   0px 0px,   0px 0px; }
  100% { background-position: 140px 0px, -110px 0px, 0px -140px; }
}
@keyframes glitterPulse{
  0%,100%{ opacity:.70 }
  50%    { opacity:.92 }
}

/* default: subtle / off */
.nav .tab::after{
  content:"";
  position:absolute; inset:0;
  border-radius: inherit;
  z-index: 1;                       /* above base, below label */
  pointer-events: none;
  opacity: .0;
  background:
    radial-gradient(circle at 20% 35%, rgba(255,122,214,.9) 0 3px, rgba(255,122,214,0) 4px),
    radial-gradient(circle at 70% 60%, rgba(255,179,234,.8) 0 3px, rgba(255,179,234,0) 4px),
    radial-gradient(circle at 45% 75%, rgba(255,143,223,.65) 0 2.5px, rgba(255,143,223,0) 3.5px);
  background-size: 90px 90px, 110px 110px, 95px 95px;
  background-repeat: repeat;
  mask: linear-gradient(#000, #000); /* ensure full coverage, no edge bleed */
}

/* ACTIVE: brighter, animated, still clipped */
.nav .tab.active::after{
  opacity: .88 !important;
  animation: glitterDrift 16s linear infinite, glitterPulse 8s ease-in-out infinite;
}

/* Label hearts — reserve width so buttons don’t jump */
.nav .tab .label{
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  z-index: 2;                       /* above glitter */
  letter-spacing: .06em;            /* keeps that arcade vibe */
  text-transform: uppercase;        /* matches your style */
}

/* Hearts exist always (opacity 0) so width stays constant */
.nav .tab .label::before,
.nav .tab .label::after{
  content: "❤";
  font-size: .9em;
  line-height: 1;
  color: #ff66d6;
  opacity: 0;
  transition: opacity .25s ease;
}

/* Show hearts only on active */
.nav .tab.active .label::before,
.nav .tab.active .label::after{
  opacity: 1;
}
/* END: NAV-GLITTER-HEARTS */
